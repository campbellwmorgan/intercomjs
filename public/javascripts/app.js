// Generated by CoffeeScript 1.6.3
/*
# Websockets link and door opener
*/


(function() {
  var openDoor, playAudio, playing, socket;

  openDoor = _.throttle(function() {
    return $.post('/door');
  }, 3000, {
    leading: true
  });

  playing = false;

  playAudio = function() {
    if (playing) {
      $('#audioStream').remove();
      $('.button.play').removeClass('playing');
      return playing = false;
    }
    $('.button.play').addClass('playing').after($('#audioData').html());
    return playing = true;
  };

  socket = io.connect('/');

  socket.on('buzzer', function() {
    return alert('door buzzer');
  });

  $('.openDoor').click(openDoor);

  $('.play.button').click(playAudio);

}).call(this);
